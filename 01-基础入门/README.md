# 基础入门

## 模块简介

欢迎来到 Rust 之旅！本模块将带你了解 Rust 的基础知识，包括变量、数据类型和函数。这些是构建任何 Rust 程序的基石。

## 学习目标

完成本模块后，你将能够：

- 理解 Rust 的变量系统和可变性
- 掌握基本数据类型（整数、浮点数、布尔、字符）
- 了解复合数据类型（元组、数组）
- 编写和使用函数
- 理解注释和代码组织

## 前置知识

在学习本模块之前，你应该具备：

- 基本的编程概念了解（变量、函数等）
- 熟悉命令行基本操作

## 核心概念

### 变量与可变性

在 Rust 中，变量默认是不可变的（immutable）。这是 Rust 语言设计的核心理念之一，有助于编写更安全的代码。

```rust
// 不可变变量
let x = 5;
// x = 6;  // 错误！不能给不可变变量二次赋值

// 可变变量
let mut y = 5;
y = 6;  // 正确
```

**为什么默认不可变？**

- 避免意外的数据修改
- 编译器可以进行更多优化
- 代码更容易理解和推理

### 数据类型

Rust 是静态类型语言，每个变量都有明确的类型。

#### 标量类型

**整数类型**：

| 长度 | 有符号 | 无符号 |
|------|--------|--------|
| 8-bit | `i8` | `u8` |
| 16-bit | `i16` | `u16` |
| 32-bit | `i32` | `u32` |
| 64-bit | `i64` | `u64` |
| 128-bit | `i128` | `u128` |
| arch | `isize` | `usize` |

```rust
let decimal = 98_222;      // 十进制
let hex = 0xff;            // 十六进制
let octal = 0o77;          // 八进制
let binary = 0b1111_0000;  // 二进制
let byte = b'A';           // 字节 (仅限 u8)
```

**浮点类型**：

```rust
let x = 2.0;        // f64 (默认)
let y: f32 = 3.0;   // f32
```

**布尔类型**：

```rust
let t = true;
let f: bool = false;
```

**字符类型**：

```rust
let c = 'z';
let z: char = 'ℤ';  // Unicode 支持
let heart_eyed_cat = '😻';
```

#### 复合类型

**元组**：可以将多个类型的值组合成一个复合类型。

```rust
let tup: (i32, f64, u8) = (500, 6.4, 1);

// 解构
let (x, y, z) = tup;

// 访问
let five_hundred = tup.0;
```

**数组**：所有元素类型必须相同，长度固定。

```rust
let a = [1, 2, 3, 4, 5];
let first = a[0];
```

### 函数

函数使用 `fn` 关键字声明：

```rust
fn main() {
    println!("Hello, world!");

    another_function();
}

fn another_function() {
    println!("另一个函数");
}
```

**参数和返回值**：

```rust
fn add(x: i32, y: i32) -> i32 {
    x + y  // 表达式，无分号
}

// 有返回值的函数
fn give_five() -> i32 {
    5
}

// 无返回值的函数
fn make_nothing() {
    // 返回单元类型 ()
}
```

**语句 vs 表达式**：

- **语句**：执行一些操作，不返回值（以分号结尾）
- **表达式**：计算并返回值（不以分号结尾）

```rust
// 语句
let y = 6;

// 表达式
let x = {
    let y = 3;
    y + 1  // 注意：没有分号
};
```

### 注释

```rust
// 单行注释

/*
 * 多行注释
 * 另一行
 */

/// 文档注释 - 用于项（函数、结构体等）
/// 这是更多文档内容
fn foo() {}
```

## 代码示例

本模块的代码示例位于 `examples/` 目录：

- `variables.rs` - 变量和可变性的演示
- `data_types.rs` - 数据类型的演示
- `functions.rs` - 函数的演示

运行示例：

```bash
# 编译并运行特定示例
cargo run -p 01-基础入门 --bin variables

# 或者先编译
cargo build -p 01-基础入门
./target/debug/variables
```

## 练习题

查看 [exercises.md](exercises.md) 完成练习题。

## 综合练习

查看 [综合练习.md](综合练习.md) 进行综合实践。

## 自检清单

完成学习后，使用 [自检清单.md](自检清单.md) 检查掌握情况。

## 常见问题

### Q: 为什么要用 `let mut` 而不是默认可变？

A: 不可变性是 Rust 安全性的重要组成部分。默认不可变可以：
- 防止意外的数据修改
- 让代码行为更容易预测
- 帮助编译器进行优化

当你确实需要修改时，显式使用 `mut` 使意图更清晰。

### Q: `i32` 和 `i64` 应该选哪个？

A:
- 默认使用 `i32`，它通常是最快的
- 需要更大范围时使用 `i64`
- 处理数组索引时使用 `usize`

### Q: 为什么函数返回值不用 `return`？

A: Rust 中最后的表达式（无分号）自动作为返回值。你也可以用 `return` 提前返回，但通常更简洁的写法是不用。

### Q: 什么是单元类型 `()`？

A: 单元类型类似其他语言的 `void`，表示"没有有意义的返回值"。所有不返回值的函数实际上都返回 `()`。

## 下一步

完成本模块后，继续学习：

- [02-所有权系统](../02-所有权系统/) - Rust 最核心的概念
