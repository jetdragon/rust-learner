# 修复练习测试界面问题

## 问题描述

当前练习测试界面存在以下问题：
1. **界面切换问题**：从TUI跳转到CLI界面，导致终端状态混乱
2. **无法输入答案**：窗口无响应，无法输入答案编号
3. **刷新问题**：界面不能正确刷新显示
4. **用户体验差**：整个Windows命令行窗口卡住

## 问题分析

1. **终端模式冲突**：TUI使用crossterm的raw模式，而CLI使用标准输入输出
2. **事件循环中断**：从TUI事件循环切换到阻塞式标准输入读取
3. **界面状态丢失**：切换回TUI时终端状态可能已损坏

## 解决方案

### 1. 实现TUI版本的练习界面
- 在TUI内部实现练习功能，不切换到CLI
- 使用TUI的事件处理机制处理用户输入
- 保持终端状态一致性

### 2. 添加练习状态管理
- 创建新的AppState状态：PracticeSession
- 管理练习进度、当前题目、用户答案等
- 支持题目间的导航

### 3. 实现交互式答题界面
- 显示题目和选项
- 支持键盘输入选择答案（1-9数字键）
- 支持导航（上一题/下一题）
- 实时显示答题进度

### 4. 优化界面刷新
- 确保界面及时更新
- 正确处理终端重绘
- 避免界面闪烁

## 实施计划

1. **添加新的应用状态** - PracticeSession
2. **实现练习界面绘制** - 题目显示、选项、进度条
3. **添加交互处理** - 答案输入、题目导航
4. **集成到现有TUI** - 保持状态一致性
5. **测试验证** - 确保所有功能正常

## 预期效果

- 流畅的TUI练习体验，无需切换界面
- 支持键盘输入答案，实时响应
- 界面正确刷新，无卡顿现象
- 完整的练习流程：答题→显示结果→返回