# 修复 TUI 导航双步移动问题 - 任务清单

## 诊断阶段
- [x] 在 TUI 事件处理循环中添加调试日志
- [x] 跟踪方向键和 Tab 键的事件处理流程
- [x] 检查是否有重复的事件监听器注册
- [x] 验证状态更新是否被调用多次

## 事件处理优化
- [x] 实现事件防抖机制，防止重复处理
- [x] 添加事件处理状态标志，确保单次处理
- [x] 检查 crossterm 事件读取是否存在问题
- [x] 验证事件队列处理逻辑

## 状态管理修复
- [x] 添加导航状态变更验证
- [x] 实现状态变更日志记录
- [x] 确保选中状态立即生效且不回退
- [x] 检查状态更新与渲染的同步

## 代码重构
- [x] 简化 handle_key 方法中的状态处理逻辑
- [x] 统一所有界面的导航处理方式
- [x] 移除可能导致重复处理的代码
- [x] 优化状态更新和渲染的顺序

## 测试验证
- [ ] 测试主菜单的方向键导航
- [ ] 测试仪表板的模块选择
- [ ] 测试更新进度界面的 Tab 切换
- [ ] 测试模块详情的任务选择和 Tab 切换
- [ ] 验证所有界面的导航一致性

## 性能检查
- [x] 确保修复不影响事件响应速度
- [x] 验证没有引入新的性能问题
- [x] 检查渲染频率是否合理